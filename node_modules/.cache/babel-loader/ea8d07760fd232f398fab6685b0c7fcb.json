{"ast":null,"code":"var _jsxFileName = \"/Users/yiran/Desktop/INFO442/hw7/src/JoinRoom.js\";\nimport React, { Component } from \"react\";\nimport firebase from \"firebase/app\";\nimport \"./css/room.css\";\nimport { Form, Input, Label, Button, Row, Col } from \"reactstrap\";\n\nclass JoinRoom extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onClick = e => {\n      this.setState({\n        icon: e.target.name\n      });\n    };\n\n    this.state = {\n      fname: \"\",\n      uid: \"\",\n      icon: \"profile1.png\",\n      joined: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.handleJoin = this.handleJoin.bind(this);\n  }\n\n  handleJoin() {\n    let roomRef = firebase.database().ref('Rooms');\n    roomRef.orderByChild('uid').equalTo(this.state.uid).limitToFirst(1).once(\"value\", snapshot => {\n      if (snapshot.exists()) {\n        roomRef.child(this.state.uid).child('players').set({\n          name: this.state.fname,\n          icon: this.state.icon\n        });\n        this.setState({\n          joined: true\n        });\n      } else {\n        alert(\"Oh no! Seems that room doesn't exist!\");\n        document.getElementById('join-form').reset();\n      }\n    });\n  }\n\n  render() {\n    let isEnabled = this.state.uid !== \"\" && this.state.fname !== \"\"; // Render different buttons whether the user has successfully been added to the room or not\n\n    let button = null;\n\n    if (!this.state.joined) {\n      button = React.createElement(Button, {\n        onClick: this.handleJoin,\n        disabled: !isEnabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"Add New Player\");\n    } else {\n      button = React.createElement(Button, {\n        href: \"/Categories\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Join Room\");\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(Form, {\n      id: \"join-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \" Create Profile \"), React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Name\"), React.createElement(Input, {\n      placeholder: \"First Name\",\n      name: \"fname\",\n      onChange: this.handleChange,\n      id: \"fname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Room #\"), React.createElement(Input, {\n      placeholder: \"Room Number\",\n      name: \"uid\",\n      onChange: this.handleChange,\n      id: \"uid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Select Profile Image\"), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      name: \"profile1.png\",\n      alt: \"big penguin\",\n      src: require(\"./icons/profile1.png\"),\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      name: \"profile2.png\",\n      alt: \"otter\",\n      src: require(\"./icons/profile2.png\"),\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      name: \"profile3.png\",\n      alt: \"polar bear\",\n      src: require(\"./icons/profile3.png\"),\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      name: \"profile4.png\",\n      alt: \"fat baby penguin\",\n      src: require(\"./icons/profile4.png\"),\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })))), button));\n  }\n\n}\n\nexport default JoinRoom;","map":{"version":3,"sources":["/Users/yiran/Desktop/INFO442/hw7/src/JoinRoom.js"],"names":["React","Component","firebase","Form","Input","Label","Button","Row","Col","JoinRoom","constructor","props","handleChange","e","setState","target","name","value","onClick","icon","state","fname","uid","joined","bind","handleJoin","roomRef","database","ref","orderByChild","equalTo","limitToFirst","once","snapshot","exists","child","set","alert","document","getElementById","reset","render","isEnabled","button","require"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport firebase from \"firebase/app\";\nimport \"./css/room.css\";\nimport { Form, Input, Label, Button, Row, Col } from \"reactstrap\";\nclass JoinRoom extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fname: \"\",\n      uid: \"\",\n      icon: \"profile1.png\",\n      joined:false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.handleJoin = this.handleJoin.bind(this);\n  }\n\n  handleChange = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  handleJoin() {\n    let roomRef = firebase.database().ref('Rooms');\n    roomRef.orderByChild('uid').equalTo(this.state.uid).limitToFirst(1).once(\"value\", snapshot => {\n      if(snapshot.exists()) {\n        roomRef.child(this.state.uid).child('players').set({\n          name: this.state.fname,\n          icon: this.state.icon\n        })\n        this.setState({joined:true});\n      } else {\n        alert(\"Oh no! Seems that room doesn't exist!\");\n        document.getElementById('join-form').reset();\n      }\n    })\n  }\n\n  onClick = e => {\n    this.setState({\n      icon: e.target.name\n    });\n  }\n  render() {\n    let isEnabled = this.state.uid !== \"\" && this.state.fname !== \"\";\n\n    // Render different buttons whether the user has successfully been added to the room or not\n    let button = null;\n    if (!this.state.joined) {\n        button = (\n          <Button onClick={this.handleJoin} disabled={!isEnabled}>\n            Add New Player\n          </Button>\n        )\n      } else {\n        button = ( \n          <Button href=\"/Categories\">\n            Join Room\n          </Button>\n        )\n    }\n    return (\n      <div>\n        <Form id=\"join-form\">\n          <h1 className=\"header\"> Create Profile </h1>\n          <Label>Name</Label>\n          <Input\n            placeholder=\"First Name\"\n            name=\"fname\"\n            onChange={this.handleChange}\n            id=\"fname\"\n          />\n          <Label>Room #</Label>\n          <Input\n            placeholder=\"Room Number\"\n            name=\"uid\"\n            onChange={this.handleChange}\n            id=\"uid\"\n          />\n          <Label>Select Profile Image</Label>\n          <Row>\n            <Col>\n              <div className=\"image\">\n                <img\n                  name=\"profile1.png\"\n                  alt=\"big penguin\"\n                  src={require(\"./icons/profile1.png\")}\n                  onClick={this.onClick}\n                />\n              </div>\n            </Col>\n            <Col>\n              <div className=\"image\">\n                <img\n                  name=\"profile2.png\"\n                  alt=\"otter\"\n                  src={require(\"./icons/profile2.png\")}\n                  onClick={this.onClick}\n                />\n              </div>\n            </Col>\n            <Col>\n             <div className=\"image\">\n                <img\n                  name=\"profile3.png\"\n                  alt=\"polar bear\"\n                  src={require(\"./icons/profile3.png\")}\n                  onClick={this.onClick}\n               />\n              </div>\n            </Col>\n            <Col>\n              <div className=\"image\">\n                <img\n                  name=\"profile4.png\"\n                  alt=\"fat baby penguin\"\n                  src={require(\"./icons/profile4.png\")}\n                  onClick={this.onClick}\n                />\n              </div>\n            </Col>\n          </Row>\n          {button}\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default JoinRoom;"]},"metadata":{},"sourceType":"module"}