{"ast":null,"code":"var _jsxFileName = \"/Users/Jinc/Desktop/hw7/src/JoinRoom.js\";\nimport React, { Component } from \"react\";\nimport firebase from \"firebase/app\";\nimport \"./css/room.css\";\nimport { Form, Input, Label, Button, Row, Col } from \"reactstrap\";\nimport { Redirect } from 'react-router-dom';\n\nclass JoinRoom extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      if (this.isValid(e.target.value, e.target.name)) {\n        document.getElementById('fname').style.borderColor = \"white\";\n        this.setState({\n          [e.target.name]: e.target.value\n        });\n      } else {\n        e.target.value = \"\";\n        this.setState({\n          fname: \"\"\n        });\n        document.getElementById('error').innerHTML = \"Please enter a correct name without symbols.\";\n        document.getElementById('error').style.visibility = \"visible\";\n        document.getElementById('fname').style.borderColor = \"red\";\n      }\n    };\n\n    this.onClick = e => {\n      this.setState({\n        icon: e.target.name\n      });\n    };\n\n    this.state = {\n      fname: \"\",\n      uid: \"\",\n      icon: \"profile1.png\",\n      roomName: \"\",\n      joined: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.handleJoin = this.handleJoin.bind(this);\n  }\n\n  isValid(str, field) {\n    if (field === 'fname' && /^[a-zA-Z ]+$/.test(str)) {\n      return true;\n    } else if (field === 'uid') {\n      return true;\n    }\n\n    return false;\n  }\n\n  handleJoin() {\n    let roomRef = firebase.database().ref('Rooms');\n    roomRef.orderByChild('uid').equalTo(this.state.uid).limitToFirst(1).once(\"value\", snapshot => {\n      if (snapshot.exists()) {\n        // Adds player information to correct room in firebase\n        roomRef.child(this.state.uid).child('players').push({\n          name: this.state.fname,\n          icon: this.state.icon\n        }); // Sets the state so that the it redirects to the correct room and displays the correct path\n\n        roomRef.child(this.state.uid).child('room_name').once(\"value\").then(data => {\n          if (data.val() !== null) {\n            this.setState({\n              roomName: data.val(),\n              joined: true\n            });\n          }\n        });\n      } else {\n        document.getElementById('error').innerHTML = \"Oh no! Seems that room doesn't exist!\";\n        document.getElementById('join-form').reset();\n      }\n    });\n  }\n\n  render() {\n    let isEnabled = this.state.uid !== \"\" && this.state.fname !== \"\"; // Render different buttons whether the user has successfully been added to the room or not\n\n    let button = null;\n\n    if (this.state.joined) {\n      return React.createElement(Redirect, {\n        push: true,\n        to: {\n          pathname: \"/\" + this.state.roomName + \"/Categories/\",\n          state: this.state\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      });\n    } else {\n      button = React.createElement(Button, {\n        onClick: this.handleJoin,\n        disabled: !isEnabled,\n        style: {\n          fontSize: \"18px\",\n          borderRadius: \"20px\",\n          width: \"200px\",\n          height: \"2em\",\n          background: \"#226597\",\n          color: \"white\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          padding: \"0px\",\n          marginLeft: \"auto\",\n          marginRight: \"auto\",\n          marginTop: \"50px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Add New Player\");\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(Form, {\n      id: \"join-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"error\",\n      className: \"alert alert-danger\",\n      role: \"alert\",\n      style: {\n        visibility: \"hidden\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \" Create Profile \"), React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Name\"), React.createElement(Input, {\n      placeholder: \"First Name\",\n      name: \"fname\",\n      onChange: this.handleChange,\n      id: \"fname\",\n      style: {\n        width: \"300px\",\n        borderRadius: \"20px\",\n        paddingLeft: \"24px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      style: {\n        marginTop: \"8%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Room #\"), React.createElement(Input, {\n      placeholder: \"Room Number\",\n      name: \"uid\",\n      onChange: this.handleChange,\n      id: \"uid\",\n      style: {\n        width: \"300px\",\n        borderRadius: \"20px\",\n        paddingLeft: \"24px\",\n        marginLeft: \"auto\",\n        marginRight: \"auto\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(Label, {\n      style: {\n        marginTop: \"2em\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Select Profile Image\"), React.createElement(Row, {\n      className: \"profileimgs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Col, {\n      style: {\n        width: \"60px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"60px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"profileimg\",\n      name: \"profile1.png\",\n      alt: \"big penguin\",\n      src: require(\"./icons/profile1.png\"),\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      style: {\n        width: \"60px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"60px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"profileimg\",\n      name: \"profile2.png\",\n      alt: \"otter\",\n      src: require(\"./icons/profile2.png\"),\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      style: {\n        width: \"60px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"60px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"profileimg\",\n      name: \"profile3.png\",\n      alt: \"polar bear\",\n      src: require(\"./icons/profile3.png\"),\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      style: {\n        width: \"60px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: \"60px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"profileimg\",\n      name: \"profile4.png\",\n      alt: \"fat baby penguin\",\n      src: require(\"./icons/profile4.png\"),\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    })))), button));\n  }\n\n}\n\nexport default JoinRoom;","map":{"version":3,"sources":["/Users/Jinc/Desktop/hw7/src/JoinRoom.js"],"names":["React","Component","firebase","Form","Input","Label","Button","Row","Col","Redirect","JoinRoom","constructor","props","handleChange","e","isValid","target","value","name","document","getElementById","style","borderColor","setState","fname","innerHTML","visibility","onClick","icon","state","uid","roomName","joined","bind","handleJoin","str","field","test","roomRef","database","ref","orderByChild","equalTo","limitToFirst","once","snapshot","exists","child","push","then","data","val","reset","render","isEnabled","button","pathname","fontSize","borderRadius","width","height","background","color","display","justifyContent","padding","marginLeft","marginRight","marginTop","paddingLeft","require"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport firebase from \"firebase/app\";\nimport \"./css/room.css\";\nimport { Form, Input, Label, Button, Row, Col } from \"reactstrap\";\nimport { Redirect } from 'react-router-dom';\nclass JoinRoom extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fname: \"\",\n      uid: \"\",\n      icon: \"profile1.png\",\n      roomName: \"\",\n      joined:false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.onClick = this.onClick.bind(this);\n    this.handleJoin = this.handleJoin.bind(this);\n  }\n\n  isValid(str, field) {\n    if ( field === 'fname' && /^[a-zA-Z ]+$/.test(str)) {\n      return true;\n    } else if ( field === 'uid') {\n      return true;\n    }\n    return false;\n  }\n\n  handleChange = e => {\n    if (this.isValid(e.target.value, e.target.name)) {\n      document.getElementById('fname').style.borderColor = \"white\";\n      this.setState({\n        [e.target.name]: e.target.value\n      }); \n    } else {\n      e.target.value = \"\";\n      this.setState({ fname: \"\" });\n      document.getElementById('error').innerHTML = \"Please enter a correct name without symbols.\";\n      document.getElementById('error').style.visibility = \"visible\";\n      document.getElementById('fname').style.borderColor = \"red\";\n    }\n  }\n\n  handleJoin() {\n    let roomRef = firebase.database().ref('Rooms');\n    roomRef.orderByChild('uid').equalTo(this.state.uid).limitToFirst(1).once(\"value\", snapshot => {\n      if (snapshot.exists()) {\n        // Adds player information to correct room in firebase\n        roomRef.child(this.state.uid).child('players').push({\n          name: this.state.fname,\n          icon: this.state.icon\n        });\n\n        // Sets the state so that the it redirects to the correct room and displays the correct path\n        roomRef.child(this.state.uid).child('room_name').once(\"value\").then(data => {\n          if (data.val() !== null) {\n            this.setState({\n              roomName: data.val(),\n              joined: true\n            });\n          }\n        });\n      } else {\n        document.getElementById('error').innerHTML = \"Oh no! Seems that room doesn't exist!\";\n        document.getElementById('join-form').reset();\n      }\n    })\n  }\n\n  onClick = e => {\n    this.setState({\n      icon: e.target.name\n    });\n  }\n\n  render() {\n    let isEnabled = this.state.uid !== \"\" && this.state.fname !== \"\";\n\n    // Render different buttons whether the user has successfully been added to the room or not\n    let button = null;\n    if (this.state.joined) {\n      return <Redirect push to={{pathname: \"/\" + this.state.roomName + \"/Categories/\", state: this.state }} />;\n    } else {\n      button = (\n        <Button onClick={this.handleJoin} disabled={!isEnabled}\n        style={{ fontSize: \"18px\", borderRadius: \"20px\", width: \"200px\", height: \"2em\", \n        background: \"#226597\", color: \"white\", display: \"flex\",\n        justifyContent: \"center\", padding: \"0px\", marginLeft: \"auto\", marginRight: \"auto\",  marginTop: \"50px\"}} >\n          Add New Player\n        </Button>\n      );\n    }\n    \n    return (\n      <div>\n        <Form id=\"join-form\">\n          <div id=\"error\"\n            className=\"alert alert-danger\"\n            role=\"alert\"\n            style={{ visibility: \"hidden\" }}>\n          </div>\n          <h1 className=\"header\"> Create Profile </h1>\n          <Label>Name</Label>\n          <Input\n            placeholder=\"First Name\"\n            name=\"fname\"\n            onChange={this.handleChange}\n            id=\"fname\"\n            style={{width: \"300px\", borderRadius: \"20px\", paddingLeft: \"24px\", marginLeft: \"auto\", marginRight: \"auto\"}}\n          />\n          <label style={{marginTop: \"8%\"}}>Room #</label>\n          <Input\n            placeholder=\"Room Number\"\n            name=\"uid\"\n            onChange={this.handleChange}\n            id=\"uid\"\n            style={{width: \"300px\", borderRadius: \"20px\", paddingLeft: \"24px\",  marginLeft: \"auto\", marginRight: \"auto\"}}\n          />\n          <Label style={{marginTop: \"2em\"}}>Select Profile Image</Label>\n          <Row className=\"profileimgs\">\n            <Col style={{width: \"60px\"}}>\n              <div style={{width: \"60px\"}}>\n                <img\n                  className=\"profileimg\"\n                  name=\"profile1.png\"\n                  alt=\"big penguin\"\n                  src={require(\"./icons/profile1.png\")}\n                  onClick={this.onClick}\n                />\n              </div>\n            </Col>\n            <Col style={{ width: \"60px\"}}>\n              <div style={{width: \"60px\"}}>\n                <img\n                  className=\"profileimg\"\n                  name=\"profile2.png\"\n                  alt=\"otter\"\n                  src={require(\"./icons/profile2.png\")}\n                  onClick={this.onClick}\n                />\n              </div>\n            </Col>\n            <Col style={{width: \"60px\"}}>\n             <div style={{width: \"60px\"}}>\n                <img\n                  className=\"profileimg\"\n                  name=\"profile3.png\"\n                  alt=\"polar bear\"\n                  src={require(\"./icons/profile3.png\")}\n                  onClick={this.onClick}\n               />\n              </div>\n            </Col>\n            <Col style={{width: \"60px\"}}>\n              <div style={{width: \"60px\"}}>\n                <img\n                  className=\"profileimg\"\n                  name=\"profile4.png\"\n                  alt=\"fat baby penguin\"\n                  src={require(\"./icons/profile4.png\")}\n                  onClick={this.onClick}\n                />\n              </div>\n            </Col>\n          </Row>\n          {button}\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default JoinRoom;"]},"metadata":{},"sourceType":"module"}